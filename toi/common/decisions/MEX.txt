MEX_foreign_policy = {
  # Mexican Debt Intervention (End Maxmillian Installation)
  eoanb_decision_MEX_Intervention = {
    icon = generic_political_discourse

    activation = {
      has_country_flag = MEX_Debt_Intervention_Flag
      OR = {
        has_war_with = ENG
        has_war_with = SPR
        has_war_with = FRA
      }
      all_owned_state = { is_controlled_by = ROOT }
    }

    available = { always = no }


    visible = {
      TAG = MEX
      TAG = MEC
    }

    cancel_trigger = {
      NOT = { all_owned_state = { is_controlled_by = ROOT } }
    }

    fire_only_once = yes

    ai_will_do = {
      base = 4000
    }
    is_good = yes

    days_mission_timeout = 1460

    timeout_effect = {
      custom_effect_tooltip = eoanb_decision_MEX_Intervention_desc
      ROOT = {
        if = {
          limit = {
            has_war_with = ENG
            controls_state = 311
          }
          transfer_state = 311
          hidden_effect = {
            add_state_core = 311
            ENG = {
              remove_state_core = 311
              remove_state_claim = 311
              country_event = { id = nap_france.36201 }
            }
          }
          white_peace = ENG
        }
        if = {
          limit = {
            has_war_with = ENG
            NOT = { controls_state = 311 }
          }
          white_peace = ENG
          hidden_effect = {
            ENG = { country_event = { id = nap_france.36201 } }
          }
        }
        if = {
          limit = { has_war_with = SPR }
          white_peace = SPR
          hidden_effect = {
            ENG = { country_event = { id = nap_france.36201 } }
          }
        }
        if = {
          limit = { has_war_with = FRA }
          white_peace = FRA
          hidden_effect = {
            ENG = { country_event = { id = nap_france.36201 } }
          }
        }
      }
      hidden_effect = {
        ROOT = { clr_country_flag = MEX_Debt_Intervention_Flag }
        ENG = { clr_country_flag = ENG_mexican_intervention_flag }
        SPR = { clr_country_flag = SPR_mexican_intervention_flag }
        FRA = { clr_country_flag = FRA_mexican_intervention_flag }
      }
    }
  }
}
