political_actions = {
  MEX_decision_claim_mexican_crown = {

    available = {
      original_tag = MEX
      has_government = autocracy
      NOT = { country_exists = MEX }
    }

    visible = {
      original_tag = MEX
      has_government = autocracy
      NOT = { country_exists = MEX }
    }

    fire_only_once = yes

    cost = 15
 
    complete_effect = {
      custom_effect_tooltip = MEX_decision_claim_mexican_crown_tt
      hidden_effect = {
        every_owned_state = {
          limit = {
            is_core_of = MEX
          }
          MEX = {
            transfer_state = PREV
          }
        }
        MEX = { 
          change_tag_from = FROM
        }
        FRA = {
          set_autonomy = {
            target = MEX
            autonomous_state = autonomy_imperial_protectorate
            freedom_level = 0.3
          }
        }
        MEX = {
          set_politics = {
            ruling_party = autocracy
            elections_allowed = no
          }
          create_country_leader = {
            name = "Maximilian-Ferdinand of Austria"
            picture= "Portrait_MEX_Maxililian_Ferdinand.dds"
            ideology = despotism
          }
        }
      }
    }

    ai_will_do = {
      base = 1000
    }
  }
}

MEX_yaqui_wars = {
  MEX_fortify_sonora = {

    allowed = { tag = MEX }                 
    available = {                          
		483 = { bunker > 0 }
    }
    activation = {                  
		has_country_flag = yaqui_wars_sonora_defense_flag
    }
	
	highlight_states = {
		state = 483
	}

    fire_only_once = yes

	custom_cost_trigger = {
		command_power > 99.9
	}
	custom_cost_text = mex_yaqui_command_power_more_than_100
	
	is_good = yes
    days_mission_timeout = 120
	selectable_mission = yes
    complete_effect = {
		custom_effect_tooltip = MEX_fortify_sonora_complete_tooltip
		
		hidden_effect = {
			clr_country_flag = yaqui_wars_sonora_defense_flag
			MEX = { country_event = { id = yaqui_wars_sonora.4 days = 35 } }
			add_command_power = -100
			add_ai_strategy = {
				type = build_building
				id = bunker
				target = 483
				value = -200
			}
		}
    }
	
	timeout_effect = {
		custom_effect_tooltip = MEX_fortify_sonora_timeout_tooltip
		hidden_effect = { 
			MEX = { country_event = { id = yaqui_wars_sonora.3 days = 7 } }
			add_ai_strategy = {
				type = build_building
				id = bunker
				target = 483
				value = -200
			}
		}
    }

    ai_will_do = {
      base = 1000
    }
  }
  
  MEX_yaqui_resistance_in_sonora = {

    allowed = { owns_state = 483 }                 
    available = {                          
		command_power > 100
		has_political_power > 100
    }
    activation = {                  
		483 = { check_variable = { yaqui_resistance_in_sonora > 4 } }
		NOT = { has_global_flag = yaqui_resistance_stopped_flag }
    }
	
	highlight_states = {
		state = 483
	}
	
	visible = {
		ROOT = { owns_state = 483 }
	}

    fire_only_once = no
	selectable_mission = yes
	cost = 100
	custom_cost_trigger = {
		command_power > 99.9
		has_political_power > 100
	}
	custom_cost_text = mex_calm_yaqui_command_power_more_than_100
	
	is_good = no
    days_mission_timeout = 100
 
    complete_effect = {
		set_global_flag = yaqui_resistance_stopped_sonora_flag
		set_global_flag = yaqui_resistance_stopped_flag
		custom_effect_tooltip = yaqui_resistance_temp_stopped_sonora_tooltip
		hidden_effect = {
			add_command_power = -100
			add_political_power = -100
		}
    }
	
	timeout_effect = {
		483 = {
			damage_building = {
				type = infrastructure
				damage = 0.15
			}
		}
		
    }

    ai_will_do = {
      base = 1000
    }
  }
}