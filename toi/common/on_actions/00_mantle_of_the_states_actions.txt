on_actions = {

	on_startup = {
        effect = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = USA
						is_core_of = USA
						is_claimed_by = USA
					}
				}
				set_state_flag = NA_B_originally_owned_by_usa
			}
			every_state = {
				limit = {
					has_state_flag = NA_B_originally_owned_by_usa
				}
				if = {
					limit = { state_population < 1000 }
					set_variable = { NA_B_state_pop_points = 0 }
				}
				else_if = {
					limit = { state_population < 10000 }
					set_variable = { NA_B_state_pop_points = 1 }
				}
				else_if = {
					limit = { state_population < 30000 }
					set_variable = { NA_B_state_pop_points = 2 }
				}
				else_if = {
					limit = { state_population < 50000 }
					set_variable = { NA_B_state_pop_points = 3 }
				}
				else_if = {
					limit = { state_population < 80000 }
					set_variable = { NA_B_state_pop_points = 4 }
				}
				else_if = {
					limit = { state_population < 100000 }
					set_variable = { NA_B_state_pop_points = 5 }
				}
				else_if = {
					limit = { state_population < 200000 }
					set_variable = { NA_B_state_pop_points = 6 }
				}
				else_if = {
					limit = { state_population < 300000 }
					set_variable = { NA_B_state_pop_points = 7 }
				}
				else_if = {
					limit = { state_population < 400000 }
					set_variable = { NA_B_state_pop_points = 8 }
				}
				else_if = {
					limit = { state_population < 500000 }
					set_variable = { NA_B_state_pop_points = 9 }
				}
				else_if = {
					limit = { state_population < 600000 }
					set_variable = { NA_B_state_pop_points = 10 }
				}
				else_if = {
					limit = { state_population < 700000 }
					set_variable = { NA_B_state_pop_points = 11 }
				}
				else_if = {
					limit = { state_population < 800000 }
					set_variable = { NA_B_state_pop_points = 12 }
				}
				else_if = {
					limit = { state_population < 900000 }
					set_variable = { NA_B_state_pop_points = 13 }
				}
				else_if = {
					limit = { state_population < 1000000 }
					set_variable = { NA_B_state_pop_points = 14 }
				}
				else_if = {
					limit = { state_population < 1250000 }
					set_variable = { NA_B_state_pop_points = 15 }
				}
				else_if = {
					limit = { state_population < 1500000 }
					set_variable = { NA_B_state_pop_points = 16 }
				}
				else_if = {
					limit = { state_population < 1750000 }
					set_variable = { NA_B_state_pop_points = 17 }
				}
				else_if = {
					limit = { state_population < 2000000 }
					set_variable = { NA_B_state_pop_points = 18 }
				}
				else_if = {
					limit = { state_population < 2250000 }
					set_variable = { NA_B_state_pop_points = 19 }
				}
				else_if = {
					limit = { state_population < 2500000 }
					set_variable = { NA_B_state_pop_points = 20 }
				}
				else_if = {
					limit = { state_population < 2750000 }
					set_variable = { NA_B_state_pop_points = 21 }
				}
				else_if = {
					limit = { state_population < 3000000 }
					set_variable = { NA_B_state_pop_points = 22 }
				}
				else_if = {
					limit = { state_population < 3500000 }
					set_variable = { NA_B_state_pop_points = 23 }
				}
				else_if = {
					limit = { state_population < 4000000 }
					set_variable = { NA_B_state_pop_points = 24 }
				}
				else_if = {
					limit = { state_population < 4500000 }
					set_variable = { NA_B_state_pop_points = 25 }
				}
				else_if = {
					limit = { state_population < 5000000 }
					set_variable = { NA_B_state_pop_points = 26 }
				}
				else_if = {
					limit = { state_population > 5000000 }
					set_variable = { NA_B_state_pop_points = 27 }
				}
				if = {
					limit = {
						check_variable = { var = NA_B_state_pop_points value = 0 compare = greater_than_or_equals }
						check_variable = { var = NA_B_state_pop_points value = 3 compare = less_than }
					}
					add_to_variable = { NA_B_mantle_of_the_state_points = 1 }
				}
				else_if = {
					limit = {
						check_variable = { var = NA_B_state_pop_points value = 3 compare = equals }
					}
					add_to_variable = { NA_B_mantle_of_the_state_points = 3 }
				}
				else_if = {
					limit = {
						check_variable = { var = NA_B_state_pop_points value = 4 compare = greater_than_or_equals }
						check_variable = { var = NA_B_state_pop_points value = 6 compare = less_than }
					}
					add_to_variable = { NA_B_mantle_of_the_state_points = 4 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 6 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 6 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 7 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 8 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 8 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 10 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 9 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 12 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 10 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 14 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 11 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 18 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 12 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 22 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 13 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 26 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 14 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 30 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 15 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 35 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 16 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 40 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 17 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 45 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 18 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 50 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 19 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 55 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 20 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 60 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 21 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 65 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 22 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 70 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 23 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 80 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 24 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 90 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 25 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 100 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 26 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 110 }
				}
				else_if = {
					limit = { check_variable = { var = NA_B_state_pop_points value = 27 compare = equals } }
					add_to_variable = { NA_B_mantle_of_the_state_points = 150 }
				}
			}
		}
	}
	
	on_monthly = {

		effect = {
			if = {
				limit = {
					has_global_flag = USA_great_collapse
					NOT = { has_global_flag = is_successor_state_event_fired_flag }
				}
				set_global_flag = is_successor_state_event_fired_flag
				news_event = { id = USA_successor_state_decision.2 days = 19 }
				every_country = {
					limit = { 
						is_former_usa_state = yes 
						is_subject = no
					}
					country_event = { id = USA_successor_state_decision.1 days = 5 }
				}
			}
		}
	}
	
	on_subject_autonomy_level_change = {
		effect = {
			if = { 
				limit = {
					ROOT = {
						OVERLORD = { TAG = USA }
						NOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
						NOT = { has_cosmetic_tag = PIE_focus_ITA }
						OR = {
							has_autonomy_state = autonomy_organized_incorporated_territory
							has_autonomy_state = autonomy_first_nations_reservation
						}
					}
				}
				if = {
					limit = {
						ROOT = { has_idea = chiefdom }
					}
					ROOT = {
						set_cosmetic_tag = USA_organized_incorporated_territory 
						set_popularities = {
							anarchism = 1
							vanguard_communism = 0
							collectivist_socialism = 0
							social_egalitarianism = 3
							centrism = 5
							traditional_conservatism = 5
							radical_democracy = 0
							chauvinist_populism = 0
							autocracy = 0
							fundamentalism = 86
						}
						set_politics = {
							ruling_party = fundamentalism
						}
					}
				}
				else = {
					ROOT = { 
						set_cosmetic_tag = USA_organized_incorporated_territory 
					}
				}
			}
			if = { 
				limit = {
					ROOT = {
						has_cosmetic_tag = USA_organized_incorporated_territory
						NOT = {
							has_autonomy_state = autonomy_organized_incorporated_territory
							has_autonomy_state = autonomy_first_nations_reservation
						}
					}
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
		}
	}
	
	on_puppet = {
		effect = {
			if = {
				limit = {
					ROOT = {
						OVERLORD = { TAG = USA }
						NOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
						NOT = { has_cosmetic_tag = PIE_focus_ITA }
						OR = {
							has_autonomy_state = autonomy_organized_incorporated_territory
							has_autonomy_state = autonomy_first_nations_reservation
						}
					}
				}
				if = {
					limit = {
						ROOT = { has_idea = chiefdom }
					}
					ROOT = { 
						set_cosmetic_tag = USA_organized_incorporated_territory 
						set_popularities = {
							anarchism = 1
							vanguard_communism = 0
							collectivist_socialism = 0
							social_egalitarianism = 3
							centrism = 5
							traditional_conservatism = 5
							radical_democracy = 0
							chauvinist_populism = 0
							autocracy = 0
							fundamentalism = 86
						}
						set_politics = {
							ruling_party = fundamentalism
						}
					}
				}
				else = {
					ROOT = { 
						set_cosmetic_tag = USA_organized_incorporated_territory 
					}
				}
			}
			if = {
				limit = {
					ROOT = {
						OVERLORD = { NOT = { TAG = USA } }
						has_cosmetic_tag = USA_organized_incorporated_territory
					}
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
			if = {
				limit = { 
					TAG = SEM 
					NOT = { has_global_flag = SEM_puppeted_by_war_flag }
				}
				set_global_flag = SEM_puppeted_by_war_flag
				if = {
					limit = { 
						FROM = { TAG = USA } 
						date < 1861.01.01
					}
					USA = { country_event = { id = sem_on_puppet.1 days = 2 } }
				}
				if = {
					limit = { has_idea = SEM_idea_defend_our_homes }
					remove_ideas = SEM_idea_defend_our_homes
				}
				if = {
					limit = { has_idea = SEM_idea_defend_the_land }
					remove_ideas = SEM_idea_defend_the_land
				}
			}
		}
	}
	
	on_annex = {
		effect = {
			if = {
				limit = {
					FROM = { TAG = SEM }
					NOT = { has_global_flag = SEM_annexed_by_war_flag }
				}
				set_global_flag = SEM_annexed_by_war_flag
				if = {
					limit = { 
						ROOT = { TAG = USA } 
						date < 1861.01.01
					}
					USA = { country_event = { id = sem_on_annex.1 days = 2 } }
				}
				if = {
					limit = { FROM = { has_idea = SEM_idea_defend_our_homes } }
					FROM = { remove_ideas = SEM_idea_defend_our_homes }
				}
				if = {
					limit = { FROM = { has_idea = SEM_idea_defend_the_land } }
					FROM = { remove_ideas = SEM_idea_defend_the_land }
				}
			}
		}
	}
	
	on_release_as_puppet = {
		effect = {
			if = {
				limit = {
					ROOT = {
						OVERLORD = { TAG = USA }
						NOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
						NOT = { has_cosmetic_tag = PIE_focus_ITA }
						OR = {
							has_autonomy_state = autonomy_organized_incorporated_territory
							has_autonomy_state = autonomy_first_nations_reservation
						}
					}
				}
				if = {
					limit = {
						ROOT = { has_idea = chiefdom }
					}
					ROOT = { 
						set_cosmetic_tag = USA_organized_incorporated_territory 
						set_popularities = {
							anarchism = 1
							vanguard_communism = 0
							collectivist_socialism = 0
							social_egalitarianism = 3
							centrism = 5
							traditional_conservatism = 5
							radical_democracy = 0
							chauvinist_populism = 0
							autocracy = 0
							fundamentalism = 86
						}
						set_politics = {
							ruling_party = fundamentalism
						}
					}
				}
				else = {
					ROOT = { 
						set_cosmetic_tag = USA_organized_incorporated_territory 
					}
				}
			}
			if = {
				limit = {
					ROOT = {
						OVERLORD = { NOT = { TAG = USA } }
						has_cosmetic_tag = USA_organized_incorporated_territory
					}
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
		}
	}
	
	on_subject_annexed = {
		effect = {
			if = { 
				limit = {
					ROOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
		}
	}
	
	on_subject_free = {
		effect = {
			if = { 
				limit = { 
					ROOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
		}
	}
	
	on_release_as_free = {
		effect = {
			if = { 
				limit = { 
					ROOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
		}
	}
	
	on_liberate = {
		effect = {
			if = { 
				limit = { 
					ROOT = { has_cosmetic_tag = USA_organized_incorporated_territory }
				}
				ROOT = { drop_cosmetic_tag = yes }
			}
		}
	}
}