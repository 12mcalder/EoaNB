mhc_junta_nullify_ps = {
	hidden_effect = {
		if = {
			limit = {
				PS_pol_stab_minus_five = yes
			}
			increase_ps_by_three = yes
			increase_ps_by_two = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_minus_four = yes
			}
			increase_ps_by_two = yes
			increase_ps_by_two = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_minus_three = yes
			}
			increase_ps_by_three = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_minus_two = yes
			}
			increase_ps_by_two = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_minus_one = yes
			}
			increase_ps_by_one = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_plus_one = yes
			}
			decrease_ps_by_one = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_plus_two = yes
			}
			decrease_ps_by_two = yes
		}
		else_if = {
			limit = {
				PS_pol_stab_plus_three = yes
			}
			decrease_ps_by_three = yes
		}
	}
}

mhc_junta_disable_parliament_decisions = {
	hidden_effect = {
		set_country_flag = parl_van_com_meet_party_leaders_is_prohibited
		set_country_flag = parl_col_soc_meet_party_leaders_is_prohibited
		set_country_flag = parl_soc_ega_meet_party_leaders_is_prohibited
		set_country_flag = parl_cen_meet_party_leaders_is_prohibited
		set_country_flag = parl_tra_con_meet_party_leaders_is_prohibited
		set_country_flag = parl_rad_dem_meet_party_leaders_is_prohibited
		set_country_flag = parl_aut_meet_party_leaders_is_prohibited
		set_country_flag = parl_chauv_pop_meet_party_leaders_is_prohibited
		set_country_flag = parl_fun_meet_party_leaders_is_prohibited
		
		set_country_flag = parl_make_speech_in_parliament_is_prohibited
		set_country_flag = parl_make_political_deals_is_prohibited
		set_country_flag = parl_convince_opposition_leaders_is_prohibited
		set_country_flag = parl_pressure_the_lobbies_is_prohibited
		set_country_flag = parl_talk_with_the_unions_is_prohibited
		set_country_flag = parl_silence_out_opponants_is_prohibited
		set_country_flag = parl_propose_compromises_is_prohibited
		set_country_flag = parl_arrest_opposition_leaders_is_prohibited
		set_country_flag = parl_ban_opposition_party_is_prohibited
	}
}

mhc_junta_enable_parliament_decisions = {
	hidden_effect = {
		clr_country_flag = parl_van_com_meet_party_leaders_is_prohibited
		clr_country_flag = parl_col_soc_meet_party_leaders_is_prohibited
		clr_country_flag = parl_soc_ega_meet_party_leaders_is_prohibited
		clr_country_flag = parl_cen_meet_party_leaders_is_prohibited
		clr_country_flag = parl_tra_con_meet_party_leaders_is_prohibited
		clr_country_flag = parl_rad_dem_meet_party_leaders_is_prohibited
		clr_country_flag = parl_aut_meet_party_leaders_is_prohibited
		clr_country_flag = parl_chauv_pop_meet_party_leaders_is_prohibited
		clr_country_flag = parl_fun_meet_party_leaders_is_prohibited
		
		clr_country_flag = parl_make_speech_in_parliament_is_prohibited
		clr_country_flag = parl_make_political_deals_is_prohibited
		clr_country_flag = parl_convince_opposition_leaders_is_prohibited
		clr_country_flag = parl_pressure_the_lobbies_is_prohibited
		clr_country_flag = parl_talk_with_the_unions_is_prohibited
		clr_country_flag = parl_silence_out_opponants_is_prohibited
		clr_country_flag = parl_propose_compromises_is_prohibited
		clr_country_flag = parl_arrest_opposition_leaders_is_prohibited
		clr_country_flag = parl_ban_opposition_party_is_prohibited
	}
}

mhc_reset_all_selectors = {
	hidden_effect = {
		ROOT = {
			set_variable = { show_local_mhc_selector = 0 }
		}
	}
}

mhc_raise_power_collector = {
	hidden_effect = {
		#ROOT = {
			mhc_raise_power_army = yes
			#mhc_raise_power_airforce = yes
			#mhc_raise_power_navy = yes
		#}
	}
}

mhc_lower_power_collector = {
	hidden_effect = {
		#ROOT = {
			mhc_lower_power_army = yes
			#mhc_lower_power_airforce = yes
			#mhc_lower_power_navy = yes
		#}
	}
}

mhc_get_results_collector = {
	hidden_effect = {
		#ROOT = {
			mhc_get_results_army = yes
			#mhc_get_results_airforce = yes
			#mhc_get_results_navy = yes
		#}
	}
}

mhc_get_results_effects_collector = {
	hidden_effect = {
		#ROOT = {
			mhc_get_results_effects_army = yes
			#mhc_get_results_effects_airforce = yes
			#mhc_get_results_effects_navy = yes
		#}
	}
}

mhc_junta_collector = {
	hidden_effect = {
		if = {
			limit = {
				NOT = {
					has_government = chauvinist_populism
					has_civil_war = yes
				}
			}
			if = {
				limit = {
					check_variable = { mhc_army_power > 79 }
					NOT = {
						OR = {
							has_country_flag = MHC_military_junta_army
							has_country_flag = MHC_military_junta_airforce
							has_country_flag = MHC_military_junta_navy
							has_idea = mhc_military_junta_idea_army
							has_idea = mhc_military_junta_idea_army_after_effects
						}
					}
				}
				random_list = {
					50 = {
						#nothing
					}
					50 = {
						mhc_create_junta_army = yes
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_airforce_power > 79 }
					NOT = {
						OR = {
							has_country_flag = MHC_military_junta_army
							has_country_flag = MHC_military_junta_airforce
							has_country_flag = MHC_military_junta_navy
							#has_idea = mhc_military_junta_idea_airforce
							#has_idea = mhc_military_junta_idea_airforce_after_effects
						}
					}
				}
				random_list = {
					50 = {
						#nothing
					}
					50 = {
						#mhc_create_junta_airforce = yes
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_navy_power > 79 }
					NOT = {
						OR = {
							has_country_flag = MHC_military_junta_army
							has_country_flag = MHC_military_junta_airforce
							has_country_flag = MHC_military_junta_navy
							#has_idea = mhc_military_junta_idea_navy
							#has_idea = mhc_military_junta_idea_navy_after_effects
						}
					}
				}
				random_list = {
					50 = {
						#nothing
					}
					50 = {
						#mhc_create_junta_navy = yes
					}
				}
			}
		}
	}
}

mhc_raise_power_of_org_army = {
	hidden_effect = {
		set_temp_variable = { temp_mhc_army_power = mhc_army_power }
		add_to_temp_variable = { temp_mhc_army_power = 1 }
		if = {
			limit = {
				check_variable = { temp_mhc_army_power < 101 }
			}
			add_to_variable = {
				var = mhc_army_power
				value = 1
			}
		}
	}
}

mhc_lower_power_of_org_army_target = {
	hidden_effect = {
		set_temp_variable = { temp_mhc_army_power = mhc_army_power }
		subtract_from_temp_variable = { temp_mhc_army_power = temp_mhc_army_power_subst_target }
		if = {
			limit = {
				check_variable = { temp_mhc_army_power > 0 }
			}
			subtract_from_variable = {
				var = mhc_army_power
				value = temp_mhc_army_power_subst_target
			}
		}
		else_if = {
			limit = {
				OR = {
					check_variable = { temp_mhc_army_power < 0 }
					check_variable = { temp_mhc_army_power = 0 }
				}
			}
			set_variable = {
				var = mhc_army_power
				value = 1
			}
		}
	}
}

mhc_raise_power_army = {
	hidden_effect = {
		#ROOT = {
			if = {
				limit = {
					has_variable = mhc_sec_power
					is_in_array = {
						array = local_mhc_active
						value = 1
					}
				}
				set_temp_variable = { temp_mhc_sec_power = mhc_sec_power }
				add_to_temp_variable = { temp_mhc_sec_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_sec_power < 101 }
					}
					add_to_variable = {
						var = mhc_sec_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_chief_power
					is_in_array = {
						array = local_mhc_active
						value = 2
					}
				}
				set_temp_variable = { temp_mhc_chief_power = mhc_chief_power }
				add_to_temp_variable = { temp_mhc_chief_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_chief_power < 101 }
					}
					add_to_variable = {
						var = mhc_chief_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_vchief_power
					is_in_array = {
						array = local_mhc_active
						value = 3
					}
				}
				set_temp_variable = { temp_mhc_vchief_power = mhc_vchief_power }
				add_to_temp_variable = { temp_mhc_vchief_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_vchief_power < 101 }
					}
					add_to_variable = {
						var = mhc_vchief_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_quart_power
					is_in_array = {
						array = local_mhc_active
						value = 4
					}
				}
				set_temp_variable = { temp_mhc_quart_power = mhc_quart_power }
				add_to_temp_variable = { temp_mhc_quart_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_quart_power < 101 }
					}
					add_to_variable = {
						var = mhc_quart_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_pchief_power
					is_in_array = {
						array = local_mhc_active
						value = 5
					}
				}
				set_temp_variable = { temp_mhc_pchief_power = mhc_pchief_power }
				add_to_temp_variable = { temp_mhc_pchief_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_pchief_power < 101 }
					}
					add_to_variable = {
						var = mhc_pchief_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_ins_power
					is_in_array = {
						array = local_mhc_active
						value = 6
					}
				}
				set_temp_variable = { temp_mhc_ins_power = mhc_ins_power }
				add_to_temp_variable = { temp_mhc_ins_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_ins_power < 101 }
					}
					add_to_variable = {
						var = mhc_ins_power
						value = 1
					}
				}
			}
			
			### Whole organisation
			if = {
				limit = {
					NOT = {
						has_country_flag = mhc_sec_unfit
						has_country_flag = mhc_chief_unfit
					}
					
					any_of = {
						array = local_mhc_army_available_array
						
						OR = {
							is_in_array = {
								array = local_mhc_active
								value = v
							}
							is_in_array = {
								array = mhc_powerful_army_officials
								value = v
							}
						}
					}
				}
				mhc_raise_power_of_org_army = yes
				for_each_loop = {
					array = mhc_powerful_army_officials
					
					mhc_raise_power_of_org_army = yes
					mhc_raise_power_of_org_army = yes
				}
			}
		#}
	}
}

mhc_lower_power_army = {
	hidden_effect = {
		#ROOT = {
			if = {
				limit = {
					has_variable = mhc_sec_power
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = 1
						}
					}
				}
				set_temp_variable = { temp_mhc_sec_power = mhc_sec_power }
				subtract_from_temp_variable = { temp_mhc_sec_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_sec_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_sec_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_chief_power
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = 2
						}
					}
				}
				set_temp_variable = { temp_mhc_chief_power = mhc_chief_power }
				subtract_from_temp_variable = { temp_mhc_chief_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_chief_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_chief_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_vchief_power
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = 3
						}
					}
				}
				set_temp_variable = { temp_mhc_vchief_power = mhc_vchief_power }
				subtract_from_temp_variable = { temp_mhc_vchief_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_vchief_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_vchief_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_quart_power
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = 4
						}
					}
				}
				set_temp_variable = { temp_mhc_quart_power = mhc_quart_power }
				subtract_from_temp_variable = { temp_mhc_quart_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_quart_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_quart_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_pchief_power
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = 5
						}
					}
				}
				set_temp_variable = { temp_mhc_pchief_power = mhc_pchief_power }
				subtract_from_temp_variable = { temp_mhc_pchief_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_pchief_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_pchief_power
						value = 1
					}
				}
			}
			if = {
				limit = {
					has_variable = mhc_ins_power
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = 6
						}
					}
				}
				set_temp_variable = { temp_mhc_ins_power = mhc_ins_power }
				subtract_from_temp_variable = { temp_mhc_ins_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_ins_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_ins_power
						value = 1
					}
				}
			}
			
			### Whole organisation
			if = {
				limit = {
					OR = {
						OR = {
							has_country_flag = mhc_sec_unfit
							has_country_flag = mhc_chief_unfit
						}
						
						NOT = {
							any_of = {
								array = local_mhc_army_available_array
								
								OR = {
									is_in_array = {
										array = local_mhc_active
										value = v
									}
									is_in_array = {
										array = mhc_powerful_army_officials
										value = v
									}
								}
							}
						}
					}
				}
				set_temp_variable = { temp_mhc_army_power = mhc_army_power }
				subtract_from_temp_variable = { temp_mhc_army_power = 1 }
				if = {
					limit = {
						check_variable = { temp_mhc_army_power > 0 }
					}
					subtract_from_variable = {
						var = mhc_army_power
						value = 1
					}
				}
			}
		#}
	}
}

mhc_get_results_army = {
	hidden_effect = {
		#ROOT = {
			set_temp_variable = { temp_mhc_result_first_factor = -0.05 }
			set_temp_variable = { temp_mhc_result_second_factor = 0 }
			
			if = {
				limit = {
					check_variable = { mhc_chief_power > mhc_sec_power }
				}
				add_to_temp_variable = {
					var = temp_mhc_result_second_factor
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = { mhc_vchief_power > mhc_chief_power }
				}
				add_to_temp_variable = {
					var = temp_mhc_result_second_factor
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = { mhc_quart_power > mhc_vchief_power }
				}
				add_to_temp_variable = {
					var = temp_mhc_result_second_factor
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = { mhc_pchief_power > mhc_chief_power }
				}
				add_to_temp_variable = {
					var = temp_mhc_result_second_factor
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = { mhc_ins_power > mhc_pchief_power }
				}
				add_to_temp_variable = {
					var = temp_mhc_result_second_factor
					value = 1
				}
			}
			
			if = {
				limit = {
					NOT = {
						has_variable = local_mhc_disorganized_general
					}
				}
				set_variable = { local_mhc_disorganized_general = 0 }
			}
			
			multiply_temp_variable = { temp_mhc_result_first_factor = temp_mhc_result_second_factor }
			set_variable = { local_mhc_disorganized_general = temp_mhc_result_first_factor }
			
			if = {
				limit = {
					NOT = {
						has_dynamic_modifier = { modifier = mhc_disorganized_modifier }
					}
					check_variable = { local_mhc_disorganized_general < 0 }
				}
				add_dynamic_modifier = { modifier = mhc_disorganized_modifier }
			}
			else_if = {
				limit = {
					has_dynamic_modifier = { modifier = mhc_disorganized_modifier }
					NOT = {
						check_variable = { local_mhc_disorganized_general < 0 }
					}
				}
				remove_dynamic_modifier = { modifier = mhc_disorganized_modifier }
			}
		#}
	}
}

mhc_get_results_effects_army = {
	hidden_effect = {
		#ROOT = {
			mhc_get_results_effects_add_powerful_positions_army = yes
			mhc_get_results_effects_remove_powerful_positions_army = yes
		#}
	}
}

mhc_get_results_effects_add_powerful_positions_army = {
	hidden_effect = {
		#ROOT = {
			#add
			if = {
				limit = {
					check_variable = { mhc_sec_power > 49 }
					NOT = {
						is_in_array = {
							array = mhc_powerful_army_officials
							value = mhc_sec_value
						}
					}
				}
				add_to_array = {
					array = mhc_powerful_army_officials
					value = mhc_sec_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_chief_power > 49 }
					NOT = {
						is_in_array = {
							array = mhc_powerful_army_officials
							value = mhc_chief_value
						}
					}
				}
				add_to_array = {
					array = mhc_powerful_army_officials
					value = mhc_chief_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_vchief_power > 49 }
					NOT = {
						is_in_array = {
							array = mhc_powerful_army_officials
							value = mhc_vchief_value
						}
					}
				}
				add_to_array = {
					array = mhc_powerful_army_officials
					value = mhc_vchief_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_quart_power > 49 }
					NOT = {
						is_in_array = {
							array = mhc_powerful_army_officials
							value = mhc_quart_value
						}
					}
				}
				add_to_array = {
					array = mhc_powerful_army_officials
					value = mhc_quart_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_pchief_power > 49 }
					NOT = {
						is_in_array = {
							array = mhc_powerful_army_officials
							value = mhc_pchief_value
						}
					}
				}
				add_to_array = {
					array = mhc_powerful_army_officials
					value = mhc_pchief_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_ins_power > 49 }
					NOT = {
						is_in_array = {
							array = mhc_powerful_army_officials
							value = mhc_ins_value
						}
					}
				}
				add_to_array = {
					array = mhc_powerful_army_officials
					value = mhc_ins_value
				}
			}
		#}
	}
}

mhc_get_results_effects_remove_powerful_positions_army = {
	hidden_effect = {
		#ROOT = {
			#add
			if = {
				limit = {
					check_variable = { mhc_sec_power < 50 }
					is_in_array = {
						array = mhc_powerful_army_officials
						value = mhc_sec_value
					}
				}
				remove_from_array = {
					array = mhc_powerful_army_officials
					value = mhc_sec_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_chief_power < 50 }
					is_in_array = {
						array = mhc_powerful_army_officials
						value = mhc_chief_value
					}
				}
				remove_from_array = {
					array = mhc_powerful_army_officials
					value = mhc_chief_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_quart_power < 50 }
					is_in_array = {
						array = mhc_powerful_army_officials
						value = mhc_quart_value
					}
				}
				remove_from_array = {
					array = mhc_powerful_army_officials
					value = mhc_quart_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_pchief_power < 50 }
					is_in_array = {
						array = mhc_powerful_army_officials
						value = mhc_pchief_value
					}
				}
				remove_from_array = {
					array = mhc_powerful_army_officials
					value = mhc_pchief_value
				}
			}
			if = {
				limit = {
					check_variable = { mhc_ins_power < 50 }
					is_in_array = {
						array = mhc_powerful_army_officials
						value = mhc_ins_value
					}
				}
				remove_from_array = {
					array = mhc_powerful_army_officials
					value = mhc_ins_value
				}
			}
		#}
	}
}

mhc_add_sec = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_sec_value
				}
				add_political_power = -50
				set_variable = { mhc_sec_power = 1 }
				mhc_get_results_effects_collector = yes
			}
			sound_effect = "assign_leader"
			set_variable = { show_local_mhc_selector = 0 }
			if = {
				limit = {
					NOT = {
						has_variable = mhc_sec_value
					}
				}
				set_variable = { mhc_sec_value = mhc_add_sec_target }
			}
			else = {
				mhc_clear_sec = yes
				set_variable = { mhc_sec_value = mhc_add_sec_target }
			}
			if = {
				limit = {
					has_variable = local_mhc_high_available_array^0
					NOT = {
						is_in_array = {
							array = local_mhc_high_available_array
							value = mhc_add_sec_target
						}
					}
				}
				set_country_flag = mhc_sec_unfit
			}
			else_if = {
				limit = {
					has_country_flag = mhc_sec_unfit
					has_variable = local_mhc_high_available_array^0
					is_in_array = {
						array = local_mhc_high_available_array
						value = mhc_add_sec_target
					}
				}
				clr_country_flag = mhc_sec_unfit
			}
			set_variable = { mhc_sec_power = 1 }
		}
	}
}

mhc_add_chief = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_chief_value
				}
				add_political_power = -50
				set_variable = { mhc_chief_power = 1 }
				mhc_get_results_effects_collector = yes
			}
			sound_effect = "assign_leader"
			set_variable = { show_local_mhc_selector = 0 }
			if = {
				limit = {
					NOT = {
						has_variable = mhc_chief_value
					}
				}
				set_variable = { mhc_chief_value = mhc_add_chief_target }
			}
			else = {
				mhc_clear_chief = yes
				set_variable = { mhc_chief_value = mhc_add_chief_target }
			}
			if = {
				limit = {
					has_variable = local_mhc_high_available_array^0
					NOT = {
						is_in_array = {
							array = local_mhc_high_available_array
							value = mhc_add_chief_target
						}
					}
				}
				set_country_flag = mhc_chief_unfit
			}
			else_if = {
				limit = {
					has_country_flag = mhc_chief_unfit
					has_variable = local_mhc_high_available_array^0
					is_in_array = {
						array = local_mhc_high_available_array
						value = mhc_add_chief_target
					}
				}
				clr_country_flag = mhc_chief_unfit
			}
			set_variable = { mhc_chief_power = 1 }
		}
	}
}

mhc_add_vchief = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_vchief_value
				}
				add_political_power = -50
				set_variable = { mhc_vchief_power = 1 }
				mhc_get_results_effects_collector = yes
			}
			sound_effect = "assign_leader"
			set_variable = { show_local_mhc_selector = 0 }
			if = {
				limit = {
					NOT = {
						has_variable = mhc_vchief_value
					}
				}
				set_variable = { mhc_vchief_value = mhc_add_vchief_target }
			}
			else = {
				mhc_clear_vchief = yes
				set_variable = { mhc_vchief_value = mhc_add_vchief_target }
			}
			if = {
				limit = {
					has_variable = local_mhc_high_available_array^0
					NOT = {
						is_in_array = {
							array = local_mhc_high_available_array
							value = mhc_add_vchief_target
						}
					}
				}
				set_country_flag = mhc_vchief_unfit
			}
			else_if = {
				limit = {
					has_country_flag = mhc_vchief_unfit
					has_variable = local_mhc_high_available_array^0
					is_in_array = {
						array = local_mhc_high_available_array
						value = mhc_add_vchief_target
					}
				}
				clr_country_flag = mhc_vchief_unfit
			}
			set_variable = { mhc_vchief_power = 1 }
		}
	}
}

mhc_add_quart = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_quart_value
				}
				add_political_power = -50
				set_variable = { mhc_quart_power = 1 }
				mhc_get_results_effects_collector = yes
			}
			sound_effect = "assign_leader"
			set_variable = { show_local_mhc_selector = 0 }
			if = {
				limit = {
					NOT = {
						has_variable = mhc_quart_value
					}
				}
				set_variable = { mhc_quart_value = mhc_add_quart_target }
			}
			else = {
				mhc_clear_quart = yes
				set_variable = { mhc_quart_value = mhc_add_quart_target }
			}
			set_variable = { mhc_quart_power = 1 }
		}
	}
}

mhc_add_pchief = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_pchief_value
				}
				add_political_power = -50
				set_variable = { mhc_pchief_power = 1 }
				mhc_get_results_effects_collector = yes
			}
			sound_effect = "assign_leader"
			set_variable = { show_local_mhc_selector = 0 }
			if = {
				limit = {
					NOT = {
						has_variable = mhc_pchief_value
					}
				}
				set_variable = { mhc_pchief_value = mhc_add_pchief_target }
			}
			else = {
				mhc_clear_pchief = yes
				set_variable = { mhc_pchief_value = mhc_add_pchief_target }
			}
			set_variable = { mhc_pchief_power = 1 }
		}
	}
}

mhc_add_ins = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_ins_value
				}
				add_political_power = -50
				set_variable = { mhc_ins_power = 1 }
				mhc_get_results_effects_collector = yes
			}
			sound_effect = "assign_leader"
			set_variable = { show_local_mhc_selector = 0 }
			if = {
				limit = {
					NOT = {
						has_variable = mhc_ins_value
					}
				}
				set_variable = { mhc_ins_value = mhc_add_ins_target }
			}
			else = {
				mhc_clear_ins = yes
				set_variable = { mhc_ins_value = mhc_add_ins_target }
			}
			set_variable = { mhc_ins_power = 1 }
		}
	}
}

mhc_clear_sec = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_sec_value
				}
				set_temp_variable = { mhc_deactivate_target = 1 }
				mhc_deactivate = yes
				clear_variable = mhc_sec_value
			}
			if = {
				limit = {
					has_country_flag = mhc_sec_unfit
				}
				clr_country_flag = mhc_sec_unfit
			}
		}
	}
}

mhc_clear_chief = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_chief_value
				}
				set_temp_variable = { mhc_deactivate_target = 2 }
				mhc_deactivate = yes
				clear_variable = mhc_chief_value
			}
			if = {
				limit = {
					has_country_flag = mhc_chief_unfit
				}
				clr_country_flag = mhc_chief_unfit
			}
		}
	}
}

mhc_clear_vchief = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_vchief_value
				}
				set_temp_variable = { mhc_deactivate_target = 3 }
				mhc_deactivate = yes
				clear_variable = mhc_vchief_value
			}
			if = {
				limit = {
					has_country_flag = mhc_vchief_unfit
				}
				clr_country_flag = mhc_vchief_unfit
			}
		}
	}
}

mhc_clear_quart = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_quart_value
				}
				set_temp_variable = { mhc_deactivate_target = 4 }
				mhc_deactivate = yes
				clear_variable = mhc_quart_value
			}
		}
	}
}

mhc_clear_pchief = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_pchief_value
				}
				set_temp_variable = { mhc_deactivate_target = 5 }
				mhc_deactivate = yes
				clear_variable = mhc_pchief_value
			}
		}
	}
}

mhc_clear_ins = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					has_variable = mhc_ins_value
				}
				set_temp_variable = { mhc_deactivate_target = 6 }
				mhc_deactivate = yes
				clear_variable = mhc_ins_value
			}
		}
	}
}

mhc_activate = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					NOT = {
						is_in_array = {
							array = local_mhc_active
							value = mhc_activate_target
						}
					}
				}
				add_to_array = {
					array = local_mhc_active
					value = mhc_activate_target
				}
				mhc_activate_idea = yes
			}
		}
	}
}

mhc_deactivate = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					is_in_array = {
						array = local_mhc_active
						value = mhc_deactivate_target
					}
				}
				mhc_deactivate_idea = yes
				remove_from_array = {
					array = local_mhc_active
					value = mhc_deactivate_target
				}
			}
		}
	}
}

mhc_activate_idea = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					check_variable = { mhc_activate_target = 1 }
				}
				if = {
					limit = {
						has_variable = mhc_sec_value
					}
					set_temp_variable = { minister = mhc_sec_value }
					meta_effect = {
						text = {
							add_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_activate_target = 2 }
				}
				if = {
					limit = {
						has_variable = mhc_chief_value
					}
					set_temp_variable = { minister = mhc_chief_value }
					meta_effect = {
						text = {
							add_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_activate_target = 3 }
				}
				if = {
					limit = {
						has_variable = mhc_vchief_value
					}
					set_temp_variable = { minister = mhc_vchief_value }
					meta_effect = {
						text = {
							add_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_activate_target = 4 }
				}
				if = {
					limit = {
						has_variable = mhc_quart_value
					}
					set_temp_variable = { minister = mhc_quart_value }
					meta_effect = {
						text = {
							add_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_activate_target = 5 }
				}
				if = {
					limit = {
						has_variable = mhc_pchief_value
					}
					set_temp_variable = { minister = mhc_pchief_value }
					meta_effect = {
						text = {
							add_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_activate_target = 6 }
				}
				if = {
					limit = {
						has_variable = mhc_ins_value
					}
					set_temp_variable = { minister = mhc_ins_value }
					meta_effect = {
						text = {
							add_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
		}
	}
}

mhc_deactivate_idea = {
	hidden_effect = {
		ROOT = {
			if = {
				limit = {
					check_variable = { mhc_deactivate_target = 1 }
				}
				if = {
					limit = {
						has_variable = mhc_sec_value
					}
					set_temp_variable = { minister = mhc_sec_value }
					meta_effect = {
						text = {
							remove_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_deactivate_target = 2 }
				}
				if = {
					limit = {
						has_variable = mhc_chief_value
					}
					set_temp_variable = { minister = mhc_chief_value }
					meta_effect = {
						text = {
							remove_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_deactivate_target = 3 }
				}
				if = {
					limit = {
						has_variable = mhc_vchief_value
					}
					set_temp_variable = { minister = mhc_vchief_value }
					meta_effect = {
						text = {
							remove_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_deactivate_target = 4 }
				}
				if = {
					limit = {
						has_variable = mhc_quart_value
					}
					set_temp_variable = { minister = mhc_quart_value }
					meta_effect = {
						text = {
							remove_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_deactivate_target = 5 }
				}
				if = {
					limit = {
						has_variable = mhc_pchief_value
					}
					set_temp_variable = { minister = mhc_pchief_value }
					meta_effect = {
						text = {
							remove_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
			else_if = {
				limit = {
					check_variable = { mhc_deactivate_target = 6 }
				}
				if = {
					limit = {
						has_variable = mhc_ins_value
					}
					set_temp_variable = { minister = mhc_ins_value }
					meta_effect = {
						text = {
							remove_ideas = mhc_trait_[ID]
						}
						ID = "[?local_mhc_army_available_traits_array^minister]"
					}
				}
			}
		}
	}
}

mhc_create_junta_army = {
	hidden_effect = {
		set_country_flag = MHC_military_junta_army
		add_ideas = mhc_military_junta_idea_army
		
		mhc_junta_nullify_ps = yes
		
		#news event
		news_event = { id = mhc.10 }
		every_neighbor_country = {
			news_event = { id = mhc.10 days = 1 }
		}
		
		#military spending
		if = {
			limit = {
				OR = {
					has_idea = three_percent
					has_idea = two_percent
					has_idea = one_percent
				}
			}
			#vote for five percent
			set_variable = { 
				var = temp_reform_id
				value = 12.2
			}
		}
		else_if = {
			limit = {
				has_idea = five_percent
			}
			#vote for ten percent
			set_variable = { 
				var = temp_reform_id
				value = 12.1
			}
		}
		#trade policy
		else_if = {
			limit = {
				OR = {
					has_idea = free_trade
					has_idea = export_focus
				}
			}
			#vote for limited exports
			set_variable = { 
				var = temp_reform_id
				value = 7.3
			}
		}
		else_if = {
			limit = {
				has_idea = limited_exports
			}
			#vote for limited exports
			set_variable = { 
				var = temp_reform_id
				value = 7.4
			}
		}
		else = {
			set_country_flag = mhc_temp_non_vote_army
		}
		
		mhc_junta_disable_parliament_decisions = yes
		
		#vote event
		if = {
			limit = {
				has_country_flag = mhc_temp_non_vote_army
			}
			country_event = { id = mhc.13 days = 3 }
		}
		else = {
			country_event = { id = mhc.11 days = 14 }
		}
	}
}

mhc_fill_generic_army_advisor = {
	hidden_effect = {
		if = {
			limit = {
				OR = {
					AND = {
						has_variable = local_mhc_army_available_array^0
						NOT = {
							has_variable = local_mhc_army_available_array^7
						}
					}
					NOT = {
						has_variable = local_mhc_army_available_array^0
					}
				}
			}
			
			generate_random_array_with_eight_random_numbers = yes
			for_each_loop = {
				array = temp_dyn_fill_array
				
				set_temp_variable = { temp_current_index_counter = i }
				add_to_temp_variable = { temp_current_index_counter = 1 }
				
				if = {
					limit = {
						NOT = {
							has_variable = local_mhc_army_available_array^7
						}
					}
					if = {
						###generic advisors have to be saved and read to show generic gfx icons
						limit = {
							NOT = {
								has_variable = local_mhc_army_available_array^i
							}
						}
						set_variable = { local_mhc_generic_army_advisors_start_at = i }
						#advisor
						add_to_array = {
							array = local_mhc_army_available_array
							value = temp_current_index_counter
						}
						
						#trait
						generate_random_number_between_one_and_fifty = yes
						if = {
							limit = {
								NOT = {
									has_variable = local_mhc_army_available_traits_array^0
								}
							}
							add_to_array = { # position 0 is null value
								array = local_mhc_army_available_traits_array
								index = 0
								value = 0
							}
						}
						
						add_to_array = {
							array = local_mhc_army_available_traits_array
							index = temp_current_index_counter
							value = temp_generated_number_one_fifty
						}
					}
				}
				else = {
					set_temp_variable = { break = 1 }
				}
			}
		}   
	}       
}           