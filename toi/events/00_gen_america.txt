add_namespace = gen_america_diplomacy_maintenance
add_namespace = gen_america_mobilize

# Generic American Events

country_event = {
  id = gen_america_diplomacy_maintenance.1
  hidden = yes

  trigger = {
    has_idea = Gen_America_American_System
    NOT = {
      has_idea = Gen_America_Diplo_Maintain_Hidden
    }
  }
  mean_time_to_happen = { days = 2 }

  immediate = {
    add_timed_idea = {
      idea = Gen_America_Diplo_Maintain_Hidden
      days = 360
    }
    every_other_country = {
      if = {
        limit = { has_idea = Gen_America_American_System }
        add_opinion_modifier = {
          target = ROOT
          modifier = fellow_american
        }
      }
    }
  }
}

state_event = {
  id = gen_america_mobilize.1
  title = gen_america_mobilize.1.t
  desc = gen_america_mobilize.1.d

  is_triggered_only = yes

  option = {
    name = gen_america_mobilize.1.a
    custom_effect_tooltip = 01_GENAMER_MOBIL_tt
    hidden_effect = {
      THIS = {
        create_unit = {
          division = "name = \"[THIS.GetName] Militia\"
          division_template = \"National Guard\"
          start_experience_factor = 1.0
          start_equipment_factor = 1"
          owner = OWNER
        }
      }
    }
  }
}
