add_namespace = secondopiumwar
add_namespace = secondopiumwarnews

#FRA learns about Chapdelaine's Execution
country_event = {
	id = secondopiumwar.1
	title = secondopiumwar.1.t
	desc = secondopiumwar.1.d
	picture = GFX_report_event_usa_funeral
	
	fire_only_once = yes
	
	trigger = {
		tag = FRA
		date > 1857.7.3
		country_exists = QNG
	}
	
	option = {
		name = secondopiumwar.1.a
		ai_chance = { 
			factor = 5  
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		QNG = { country_event = { id = secondopiumwar.2 days = 1 } }
	}
	
	option = {
		name = secondopiumwar.1.b
		ai_chance = { factor = 95 }
		ENG = { country_event = { id = secondopiumwar.5 days = 1 } }
	}
	
	option = {
		name = secondopiumwar.1.c
		ai_chance = { factor = 0 }
		reverse_add_opinion_modifier = { target = QNG modifier = eoanb_om_FRA_QNG_ignored_chapdelaine }
		add_stability = -0.1
		add_political_power = -25
	}
	
}

#QNG gets demands for reparations from FRA
country_event = {
	id = secondopiumwar.2
	title = secondopiumwar.2.t
	desc = secondopiumwar.2.d
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.2.a
		ai_chance = { 
			factor = 5  
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		add_political_power = -120
		FRA = { country_event = { id = secondopiumwar.3 days = 1 } }
	}
	
	option = {
		name = secondopiumwar.2.b
		ai_chance = { factor = 95 }
		FRA = { country_event = { id = secondopiumwar.4 days = 1 } }
	}
	
}

#FRA gets message QNG accepted
country_event = {
	id = secondopiumwar.3
	title = secondopiumwar.3.t
	desc = secondopiumwar.3.d
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.3.a
		ai_chance = { factor = 100 }
		add_opinion_modifier = { target = QNG modifier = eoanb_om_FRA_QNG_gave_reparations }
		add_political_power = 120
	}
	
}

#FRA gets message QNG refused
country_event = {
	id = secondopiumwar.4
	title = secondopiumwar.4.t
	desc = secondopiumwar.4.d
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.4.a
		ai_chance = { 
			factor = 5  
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		reverse_add_opinion_modifier = { target = QNG modifier = eoanb_om_FRA_QNG_ignored_chapdelaine }
		add_stability = -0.1
		add_political_power = -25
	}
	
	option = {
		name = secondopiumwar.4.b
		ai_chance = { factor = 95 }
		ENG = { country_event = { id = secondopiumwar.5 days = 1 } }
	}
	
}

#ENG gets request for coalition from FRA
country_event = {
	id = secondopiumwar.5
	title = secondopiumwar.5.t
	desc = secondopiumwar.5.d
	picture = GFX_GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.5.a
		ai_chance = { factor = 100 }
		FRA = { country_event = { id = secondopiumwar.6 days = 1 } }
	}
	
	option = {
		name = secondopiumwar.5.b
		ai_chance = { factor = 0 }
		FRA = { country_event = { id = secondopiumwar.7 days = 1 } }
	}
	
}

#FRA gets message ENG is cooperating
country_event = {
	id = secondopiumwar.6
	title = secondopiumwar.6.t
	desc = secondopiumwar.6.d
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.6.a
		ai_chance = { factor = 100 }
		custom_effect_tooltip = eoanb_tt_sow_event_6_a
		hidden_effect = {
			set_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
		}
	}
	
}

#FRA gets message ENG isn't cooperating
country_event = {
	id = secondopiumwar.7
	title = secondopiumwar.7.t
	desc = secondopiumwar.7.d
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.7.a
		ai_chance = { factor = 100 }
		hidden_effect = {
			set_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
		}
	}
	
}

#QNG gets ultimatum by ENG
country_event = {
	id = secondopiumwar.8
	title = secondopiumwar.8.t
	desc = secondopiumwar.8.d
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.8.a
		ai_chance = { factor = 95 }
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
			}
			ENG = { country_event = { id = secondopiumwar.10 days = 1 } }
			FRA = { country_event = { id = secondopiumwar.10 days = 1 } }
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
			}
			ENG = { country_event = { id = secondopiumwar.10 days = 1 } }
		}
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_can_assault_canton }
		}
	}
	
	option = {
		name = secondopiumwar.8.b
		ai_chance = { 
			factor = 5  
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
			}
			ENG = { country_event = { id = secondopiumwar.9 days = 1 } }
			FRA = { country_event = { id = secondopiumwar.9 days = 1 } }
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
			}
			ENG = { country_event = { id = secondopiumwar.9 days = 1 } }
		}
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_yes_nanjing_treaty }
		}
	}
	
}

#Coalition Members are notified QNG accepted ultimatum
country_event = {
	id = secondopiumwar.9
	title = secondopiumwar.9.t
	desc = secondopiumwar.9.d
	picture = GFX_report_event_hungary_parliament
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.9.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = ENG
			}
		}
	}
	
	option = {
		name = secondopiumwar.9.b
		ai_chance = { factor = 100 }
		trigger = { TAG = ENG }
	}
	
}

#Coalition Members are notified QNG rejected ultimatum
country_event = {
	id = secondopiumwar.10
	title = secondopiumwar.10.t
	desc = secondopiumwar.10.d
	picture = GFX_report_event_generic_sign_treaty1
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.10.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = ENG
			}
		}
	}
	
	option = {
		name = secondopiumwar.10.b
		ai_chance = { factor = 100 }
		trigger = { TAG = ENG }
		custom_effect_tooltip = eoanb_tt_sow_event_10_b
	}
	
}

#Battle for Guangzhou starts
country_event = {
	id = secondopiumwar.11
	title = secondopiumwar.11.t
	desc = secondopiumwar.11.d
	picture = GFX_report_event_generic_army
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.11.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = QNG
			}
		}
		custom_effect_tooltip = eoanb_tt_sow_event_11
	}
	
	option = {
		name = secondopiumwar.11.b
		ai_chance = { factor = 100 }
		trigger = { TAG = QNG }
		custom_effect_tooltip = eoanb_tt_sow_event_11
	}
	
}

#EVENT 12 WAS PURGED

#QNG: Victory at Guangzhou
country_event = {
	id = secondopiumwar.13
	title = secondopiumwar.13.t
	desc = secondopiumwar.13.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.13.a
		ai_chance = { factor = 100 }
		custom_effect_tooltip = eoanb_tt_sow_event_decision_may_appear
		hidden_effect = {
			QNG = { set_country_flag = eoanb_flag_sow_QNG_won_at_canton }
		}
	}
}

#Coalition: Defeat at Guangzhou
country_event = {
	id = secondopiumwar.14
	title = secondopiumwar.14.t
	desc = secondopiumwar.14.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.14.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = ENG
			}
		}
	}
	
	option = {
		name = secondopiumwar.14.b
		ai_chance = { factor = 100 }
		trigger = { TAG = ENG }
		custom_effect_tooltip = eoanb_tt_sow_event_decision_may_appear
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_lost_at_canton }
		}
	}
	
}

#QNG: Defeat at Guangzhou
country_event = {
	id = secondopiumwar.15
	title = secondopiumwar.15.t
	desc = secondopiumwar.15.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.15.a
		ai_chance = { factor = 100 }
		custom_effect_tooltip = eoanb_tt_sow_event_decision_may_appear
		hidden_effect = {
			QNG = { set_country_flag = eoanb_flag_sow_QNG_lost_at_canton }
		}
	}
	
}

#Coalition: Victory at Guangzhou
country_event = {
	id = secondopiumwar.16
	title = secondopiumwar.16.t
	desc = secondopiumwar.16.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.16.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = ENG
			}
		}
	}
	
	option = {
		name = secondopiumwar.16.b
		ai_chance = { factor = 100 }
		trigger = { TAG = ENG }
		custom_effect_tooltip = eoanb_tt_sow_event_decision_may_appear
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_won_at_canton }
		}
	}
	
}

#Battle of Guangzhou ends in a draw
country_event = {
	id = secondopiumwar.17
	title = secondopiumwar.17.t
	desc = secondopiumwar.17.d
	picture = GFX_report_event_yugoslavian_cavalry
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.17.a
		ai_chance = { factor = 100 }
	}
	
}

#Battle for Taku Forts starts
country_event = {
	id = secondopiumwar.18
	title = secondopiumwar.18.t
	desc = secondopiumwar.18.d
	picture = GFX_report_event_generic_army
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.18.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = QNG
			}
		}
		custom_effect_tooltip = eoanb_tt_sow_event_18
	}
	
	option = {
		name = secondopiumwar.18.b
		ai_chance = { factor = 100 }
		trigger = { TAG = QNG }
		custom_effect_tooltip = eoanb_tt_sow_event_18
	}
	
}

#QNG: Victory at Taku Forts
country_event = {
	id = secondopiumwar.19
	title = secondopiumwar.19.t
	desc = secondopiumwar.19.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.19.a
		ai_chance = { factor = 100 }
		custom_effect_tooltip = eoanb_tt_sow_event_decision_may_appear
		hidden_effect = {
			QNG = { set_country_flag = eoanb_flag_sow_QNG_won_at_taku }
		}
	}
}

#Coalition: Defeat at Taku Forts
country_event = {
	id = secondopiumwar.20
	title = secondopiumwar.20.t
	desc = secondopiumwar.20.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.20.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = ENG
			}
		}
	}
	
	option = {
		name = secondopiumwar.20.b
		ai_chance = { factor = 100 }
		trigger = { TAG = ENG }
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_lost_at_taku }
		}
	}
	
}

#QNG: Defeat at Taku Forts
country_event = {
	id = secondopiumwar.21
	title = secondopiumwar.21.t
	desc = secondopiumwar.21.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.21.a
		ai_chance = { factor = 100 }
		hidden_effect = {
			QNG = { set_country_flag = eoanb_flag_sow_QNG_lost_at_taku }
		}
	}
	
}

#Coalition: Victory at Taku Forts
country_event = {
	id = secondopiumwar.22
	title = secondopiumwar.22.t
	desc = secondopiumwar.22.d
	picture = GFX_report_event_ger_civil_war
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.22.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = ENG
			}
		}
	}
	
	option = {
		name = secondopiumwar.22.b
		ai_chance = { factor = 100 }
		trigger = { TAG = ENG }
		custom_effect_tooltip = eoanb_tt_sow_event_decision_may_appear
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_won_at_taku }
		}
	}
	
}

#Battle of Taku Forts ends in a draw
country_event = {
	id = secondopiumwar.23
	title = secondopiumwar.23.t
	desc = secondopiumwar.23.d
	picture = GFX_report_event_yugoslavian_cavalry
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.23.a
		ai_chance = { factor = 100 }
	}
	
}

#Second Battle of Guangzhou starts
country_event = {
	id = secondopiumwar.24
	title = secondopiumwar.24.t
	desc = secondopiumwar.24.d
	picture = GFX_report_event_generic_army
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.24.a
		ai_chance = { factor = 100 }
		trigger = {
			NOT = {
				TAG = QNG
			}
		}
		custom_effect_tooltip = eoanb_tt_sow_event_24
	}
	
	option = {
		name = secondopiumwar.24.b
		ai_chance = { factor = 100 }
		trigger = { TAG = QNG }
		custom_effect_tooltip = eoanb_tt_sow_event_24
	}
	
}

#Second Battle of Guangzhou ends
country_event = {
	id = secondopiumwar.25
	title = secondopiumwar.25.t
	desc = secondopiumwar.25.d
	picture = GFX_report_event_generic_army
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.25.a
		ai_chance = { factor = 100 }
	}
	
}

#QNG receives Treaty of Tianjin Demands
country_event = {
	id = secondopiumwar.26
	title = secondopiumwar.26.t
	desc = secondopiumwar.26.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	#QNG accepts
	option = {
		name = secondopiumwar.26.a
		ai_chance = { 
			factor = 10 
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
			}
			ENG = { country_event = { id = secondopiumwar.27 days = 1 } }
			FRA = { country_event = { id = secondopiumwar.27 days = 1 } }
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
			}
			ENG = { country_event = { id = secondopiumwar.27 days = 1 } }
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
			}
			clr_global_flag = eoanb_flag_sow_ongoing
			QNG = { add_stability = -0.2 }
			QNG = { add_political_power = -250 }
			ENG = { add_political_power = 150 }
			FRA = { add_political_power = 150 }
			QNG = { add_opinion_modifier = { target = FRA modifier = eoanb_om_QNG_dislikes_winners_tianjin } }
			QNG = { add_opinion_modifier = { target = ENG modifier = eoanb_om_QNG_dislikes_winners_tianjin } }
			if = {
				limit = {
					USA = {
						#has_completed_focus = USA_trade_treaties
						has_country_flag = USA_tianjin_treaty_flag
					}
				}
				QNG = { add_opinion_modifier = { target = USA modifier = eoanb_om_QNG_dislikes_winners_tianjin } }
				USA = {
					add_timed_idea = {
						idea = USA_QNG_treaty_of_tianjin
						days = 3650
					}
				}
			}
			if = {
				limit = {
					QNG = { has_idea = free_trade }
				}
				add_political_power = 0
			}
			if = {
				limit = {
					QNG = { has_idea = export_focus }
				}
				swap_ideas = {
					remove_idea = export_focus
					add_idea = free_trade
				}
			}
			if = {
				limit = {
					QNG = { has_idea = limited_exports }
				}
				swap_ideas = {
					remove_idea = limited_exports
					add_idea = export_focus
				}
			}
			if = {
				limit = {
					QNG = { has_idea = closed_economy }
				}
				swap_ideas = {
					remove_idea = closed_economy
					add_idea = limited_exports
				}
			}
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
			}
			clr_global_flag = eoanb_flag_sow_ongoing
			QNG = { add_stability = -0.2 }
			QNG = { add_political_power = -250 }
			ENG = { add_political_power = 150 }
			QNG = { add_opinion_modifier = { target = ENG modifier = eoanb_om_QNG_dislikes_winners_tianjin } }
			if = {
				limit = {
					QNG = { has_idea = free_trade }
				}
				add_political_power = 0
			}
			if = {
				limit = {
					QNG = { has_idea = export_focus }
				}
				swap_ideas = {
					remove_idea = export_focus
					add_idea = free_trade
				}
			}
			if = {
				limit = {
					QNG = { has_idea = limited_exports }
				}
				swap_ideas = {
					remove_idea = limited_exports
					add_idea = export_focus
				}
			}
			if = {
				limit = {
					QNG = { has_idea = closed_economy }
				}
				swap_ideas = {
					remove_idea = closed_economy
					add_idea = limited_exports
				}
			}
		}
		remove_ideas = QNG_idea_arrow_incident
		add_ideas = QNG_idea_sow_humiliation
		hidden_effect = {
			ENG = { set_country_flag = eoanb_flag_sow_ENG_yes_tianjin_treaty }
			clr_global_flag = eoanb_flag_sow_ongoing
		}
	}
	
	#QNG refuses
	option = {
		name = secondopiumwar.26.b
		ai_chance = { factor = 90 }
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
			}
			ENG = { country_event = { id = secondopiumwar.28 days = 1 } }
			FRA = { country_event = { id = secondopiumwar.28 days = 1 } }
		}
		if = {
			limit = {
				has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
			}
			ENG = { country_event = { id = secondopiumwar.28 days = 1 } }
		}
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
				}
				clr_global_flag = eoanb_flag_sow_ENG_FRA_cooperate
				ENG = { set_country_flag = eoanb_flag_sow_coalition_member }
				FRA = { set_country_flag = eoanb_flag_sow_coalition_member }
			}
			if = {
				limit = {
					has_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
				}
				clr_global_flag = eoanb_flag_sow_ENG_FRA_cooperate_not
				ENG = { set_country_flag = eoanb_flag_sow_coalition_member }
			}
			set_country_flag = eoanb_flag_sow_QNG_refused_tianjin_treaty
		}
	}
	
}

#Coalition Message: QNG accepted
country_event = {
	id = secondopiumwar.27
	title = secondopiumwar.27.t
	desc = secondopiumwar.27.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.27.a
		ai_chance = { factor = 100 }
	}
	
}

#Coalition Message: QNG refused
country_event = {
	id = secondopiumwar.28
	title = secondopiumwar.28.t
	desc = secondopiumwar.28.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.28.a
		ai_chance = { factor = 100 }
	}
	
}

#ENG receives request to join Coalition
country_event = {
	id = secondopiumwar.29
	title = secondopiumwar.29.t
	desc = secondopiumwar.29.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	#Accept
	option = {
		name = secondopiumwar.29.a
		ai_chance = { factor = 50 }
		if = {
			limit = {
				FROM = { TAG = USA }
			}
			USA = { country_event = { id = secondopiumwar.30 days = 1 } }
		}
		if = {
			limit = {
				FROM = { TAG = RUS }
			}
			RUS = { country_event = { id = secondopiumwar.30 days = 1 } }
		}
	}
	
	#Refuse
	option = {
		name = secondopiumwar.29.a
		ai_chance = { factor = 50 }
		if = {
			limit = {
				FROM = { TAG = USA }
			}
			USA = { country_event = { id = secondopiumwar.31 days = 1 } }
		}
		if = {
			limit = {
				FROM = { TAG = RUS }
			}
			RUS = { country_event = { id = secondopiumwar.31 days = 1 } }
		}
	}
	
}

#Coalition join approved
country_event = {
	id = secondopiumwar.30
	title = secondopiumwar.30.t
	desc = secondopiumwar.30.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.30.a
		ai_chance = { factor = 100 }
		custom_effect_tooltip = eoanb_tt_sow_event_30_a
		hidden_effect = {
			set_country_flag = eoanb_flag_sow_coalition_member
		}
	}
	
}

#Coalition join refused
country_event = {
	id = secondopiumwar.31
	title = secondopiumwar.31.t
	desc = secondopiumwar.31.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.31.a
		ai_chance = { factor = 100 }
	}
	
}

#QNG receives Treaty of Aigun Demands
country_event = {
	id = secondopiumwar.32
	title = secondopiumwar.32.t
	desc = secondopiumwar.32.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.32.a
		ai_chance = { factor = 70 }
		RUS = { country_event = { id = secondopiumwar.33 days = 1 } }
		RUS = { transfer_state = 561 }
		RUS = { transfer_state = 1246 }
		RUS = { transfer_state = 1244 }
		RUS = { transfer_state = 560 }
		RUS = { transfer_state = 1247 }
		RUS = { transfer_state = 1248 }
		RUS = { transfer_state = 1245 }
		RUS = { transfer_state = 657 }
		RUS = { transfer_state = 1250 }
		custom_effect_tooltip = eoanb_tt_sow_event_32_a
		hidden_effect = {
			561 = { remove_core_of = QNG } 
			561 = { add_claim_by = QNG }
			1246 = { remove_core_of = QNG } 
			1246 = { add_claim_by = QNG }
			1244 = { remove_core_of = QNG } 
			1244 = { add_claim_by = QNG }
			560 = { remove_core_of = QNG } 
			560 = { add_claim_by = QNG }
			1247 = { remove_core_of = QNG } 
			1247 = { add_claim_by = QNG }
			1248 = { remove_core_of = QNG } 
			1248 = { add_claim_by = QNG }
			1245 = { remove_core_of = QNG } 
			1245 = { add_claim_by = QNG }
			657 = { remove_core_of = QNG } 
			657 = { add_claim_by = QNG }
			1250 = { remove_core_of = QNG } 
			1250 = { add_claim_by = QNG }
		}
	}
	
	option = {
		name = secondopiumwar.32.b
		ai_chance = { factor = 30 }
		RUS = { country_event = { id = secondopiumwar.34 days = 1 } }
		hidden_effect = {
			set_country_flag = eoanb_flag_sow_QNG_refused_aigun_treaty
		}
	}
	
}

#RUS gets message QNG accepted Aigun
country_event = {
	id = secondopiumwar.33
	title = secondopiumwar.33.t
	desc = secondopiumwar.33.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.33.a
		ai_chance = { factor = 100 }
	}
	
}

#RUS gets message QNG denied Aigun
country_event = {
	id = secondopiumwar.34
	title = secondopiumwar.34.t
	desc = secondopiumwar.34.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwar.34.a
		ai_chance = { factor = 100 }
	}
	
}

#QNG wins Aigun War
country_event = {
	id = secondopiumwar.35
	title = secondopiumwar.35.t
	desc = secondopiumwar.35.d
	picture = GFX_report_event_generic_army
	
	fire_only_once = yes
	
	trigger = {
		TAG = QNG
		has_war_with = RUS
		has_global_flag = eoanb_flag_sow_RUS_QNG_aigun_war
		RUS = { surrender_progress > 0.2 }
		QNG = { surrender_progress < 0.1 }
		RUS = { owns_state = 655 }
	}
	
	option = {
		name = secondopiumwar.35.a
		ai_chance = { factor = 100 }
		white_peace = RUS
		transfer_state = 655
		add_state_core = 655
		hidden_effect = {
			clr_global_flag = eoanb_flag_sow_RUS_QNG_aigun_war
		}
	}
	
}

#RUS wins Aigun War
country_event = {
	id = secondopiumwar.36
	title = secondopiumwar.36.t
	desc = secondopiumwar.36.d
	picture = GFX_report_event_generic_army
	
	fire_only_once = yes
	
	trigger = {
		TAG = RUS
		has_war_with = QNG
		has_global_flag = eoanb_flag_sow_RUS_QNG_aigun_war
		QNG = { surrender_progress > 0.2 }
		RUS = { surrender_progress < 0.1 }
	}
	
	option = {
		name = secondopiumwar.36.a
		ai_chance = { factor = 100 }
		white_peace = QNG
		transfer_state = 561
		transfer_state = 1246
		transfer_state = 1244
		transfer_state = 560
		transfer_state = 1247
		transfer_state = 1248
		transfer_state = 1245
		transfer_state = 657
		transfer_state = 1250
		transfer_state = 408
		transfer_state = 409
		transfer_state = 329
		MON = { transfer_state = 330 }
		if = {
			limit = {
				has_dlc = "Together for Victory"
			}
			set_autonomy = {
				target = MON
				autonomous_state = autonomy_dominion
				freedom_level = 0.5
			}
		}
		if = {
			limit = {
				NOT = { has_dlc = "Together for Victory" }
			}
			puppet = MON
		}
		hidden_effect = {
			clr_global_flag = eoanb_flag_sow_RUS_QNG_aigun_war
			561 = { remove_core_of = QNG } 
			561 = { add_claim_by = QNG }
			1246 = { remove_core_of = QNG } 
			1246 = { add_claim_by = QNG }
			1244 = { remove_core_of = QNG } 
			1244 = { add_claim_by = QNG }
			560 = { remove_core_of = QNG } 
			560 = { add_claim_by = QNG }
			1247 = { remove_core_of = QNG } 
			1247 = { add_claim_by = QNG }
			1248 = { remove_core_of = QNG } 
			1248 = { add_claim_by = QNG }
			1245 = { remove_core_of = QNG } 
			1245 = { add_claim_by = QNG }
			657 = { remove_core_of = QNG } 
			657 = { add_claim_by = QNG }
			1250 = { remove_core_of = QNG } 
			1250 = { add_claim_by = QNG }
			408 = { remove_core_of = QNG } 
			408 = { add_claim_by = QNG }
			409 = { remove_core_of = QNG } 
			409 = { add_claim_by = QNG }
			329 = { remove_core_of = QNG } 
			329 = { add_claim_by = QNG }
			330 = { remove_core_of = QNG } 
			330 = { add_claim_by = QNG }
		}
	}
	
}

#TO BE ADDED LATER HERE: ALTERNATE TREATY OF AIGUN FOR RUS (IF QNG ACCEPTS ULTIMATUM)

### NEWS EVENTS BELOW ###

#QNG accepts ultimatum - Treaty of Nanjing is signed
news_event = {
	id = secondopiumwarnews.1
	title = secondopiumwarnews.1.t
	desc = secondopiumwarnews.1.d
	picture = GFX_news_event_generic_sign_treaty3
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwarnews.1.a
		trigger = {
			NOT = {
				TAG = QNG
			}
		}
	}
	
	option = {
		name = secondopiumwarnews.1.b
		trigger = { TAG = QNG }
	}

}

#QNG accepts ultimatum - Treaty of Nanjing is signed - only ENG
news_event = {
	id = secondopiumwarnews.2
	title = secondopiumwarnews.2.t
	desc = secondopiumwarnews.2.d
	picture = GFX_news_event_generic_sign_treaty3
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = secondopiumwarnews.2.a
		trigger = {
			NOT = {
				TAG = QNG
			}
		}
	}
	
	option = {
		name = secondopiumwarnews.2.b
		trigger = { TAG = QNG }
	}

}