add_namespace = carlistbalears
add_namespace = charlesdead
add_namespace = choosecarlism
add_namespace = cortes
add_namespace = alfonso
add_namespace = odonellcoup
add_namespace = cataloniangry
add_namespace = armerosuccession
add_namespace = assassinationell
add_namespace = loyalspain
add_namespace = thirdcarlism


#1860 uprising
country_event = {
	id = carlistbalears.1
	title = carlistbalears.1.t
	desc = carlistbalears.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1860.4.1
	}

	option = {
		name = carlistbalears.1.a
		ai_chance = { factor = 100 }
 	random_list = {
	   80 = {
		 hidden_effect = {
			complete_national_focus = SPR_mutinyception
			complete_national_focus = SPR_balearuprising
			SPR = { country_event = { days = 1 id = carlistbalears.3 } }
		}
      }
      20 = {
	    add_political_power = -100
		hidden_effect = {
			complete_national_focus = SPR_balearuprising
        SPR = { country_event = { days = 1 id = carlistbalears.2 } }
		 }
       }
     }
   }
 }

# Continuation

country_event = {
	id = carlistbalears.2
	title = carlistbalears.2.t
	desc = carlistbalears.2.d

	fire_only_once = yes

	is_triggered_only = yes
    option = { 
	        name = carlistbalears.2.a
			ai_chance = {
                factor = 50
            }
            CSP = {
        		transfer_state = 172
        		172 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		transfer_state = 177
        		177 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
			 inherit_technology = SPR }
			CSP = {
			   declare_war_on = { target = SPR type = annex_everything }}
			CSP = {
			   load_oob = CSP_carlistspain }
			hidden_effect = {
			   complete_national_focus = SPR_successfulortegada
			   news_event = { id = carlistbalears.4 }#inform the world
	     	}
		}
	option = {
			name = carlistbalears.2.b
			ai_chance = {
                factor = 50
            }
            CSP = {
        		transfer_state = 172
        		172 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		transfer_state = 177
        		177 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
			 inherit_technology = SPR }
			CSP = {
			 change_tag_from = ROOT}
			CSP = {
			   declare_war_on = { target = SPR type = annex_everything }}
			CSP = {
			   load_oob = CSP_carlistspain }
			hidden_effect = {
			   complete_national_focus = SPR_successfulortegada
			   news_event = { id = carlistbalears.4 }#inform the world
			   set_country_flag = Thirdcarlist
	     	}
		}
}

country_event = {
	id = carlistbalears.3
	title = carlistbalears.3.t
	desc = carlistbalears.3.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
	      ai_chance = { factor = 100}
	      add_political_power = 100
		}
}

####### Announcement to the world ###########

country_event = {
	id = carlistbalears.4
	title = carlistbalears.4.t
	desc = carlistbalears.4.d

	fire_only_once = yes

	is_triggered_only = yes

	option = {
	      ai_chance = { factor = 100}
		}
}

###Death of Charles

country_event = {
	id = charlesdead.1
	title = charlesdead.1.t
	desc = charlesdead.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1861.1.13
	}

	option = {
		name = charlesdead.1.a
		ai_chance = { factor = 100 }
		add_political_power = 100
		hidden_effect = {
			complete_national_focus = SPR_claimantdeath
		}
	}
}

country_event = {
	id = choosecarlism.1
	title = choosecarlism.1.t
	desc = choosecarlism.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1861.1.25
	}
	option = {
		name = choosecarlism.1.a
		ai_chance = { factor = 100 }
     random_list = {
	   40 = {
		hidden_effect = {
			complete_national_focus = SPR_liberalcarlist
			add_political_power = 50
		}
      }
      60 = {
	    add_political_power = -100
		hidden_effect = {
			complete_national_focus = SPR_absolutwidow
			add_political_power = -50

		 }
       }
	}
  }
}

##### Armero´s cortes #######
    
	country_event = {
	id = cortes.1
	title = cortes.1.t
	desc = cortes.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = cortes.1.a
		ai_chance = { factor = 70 }
		hidden_effect = {
			complete_national_focus = SPR_expecteddefeat
			set_politics = {
					ruling_party = traditional_conservatism
				}
                create_country_leader = {
	                name = "Francisco Javier de Isturiz"
	                picture = "Portrait_SPA_Francisco_Javier.dds"
					expire = 1860.1.1
	                ideology = moderatism
                }
			}
		}
	option = {
		name = cortes.1.b
		ai_chance = { factor = 30 }
		hidden_effect = {
			complete_national_focus = SPR_armerosucceeds
		}
	}
}

##### Birth of Alfonso XII #######
    
	country_event = {
	id = alfonso.1
	title = alfonso.1.t
	desc = alfonso.1.d

	fire_only_once = yes

	trigger = {
		TAG = SPR
		date > 1858.11.28
	}
    
	option = {
		name = alfonso.1.a
		ai_chance = { factor = 100 }
		random_list = {
	   98 = {
		 hidden_effect = {
            complete_national_focus = SPR_heirbirth
			complete_national_focus = SPR_heirlives
		}
      }
      2 = {
	    add_political_power = -100
		hidden_effect = {
			complete_national_focus = SPR_heirbirth
			complete_national_focus = SPR_anticipatingchaos
			SPR = { country_event = { days = 1 id = alfonso.2 } }
			
		 }
       }
     }
    }
   }

################## About succession ############

country_event = {
	id = alfonso.2
	title = alfonso.2.t
	desc = alfonso.2.d

	fire_only_once = yes

	is_triggered_only
    
	option = {
	    name = alfonso.2.a
		ai_chance = { factor = 100 }
		hidden_effect = {
		add_stability = -0.1
		}
	}
}


######## O´Donnell coups the government ########

country_event = {
	id = odonellcoup.1
	title = odonellcoup.1.t
	desc = odonellcoup.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = odonellcoup.1.a
		ai_chance = { factor = 100}
		hidden_effect = {
                   set_politics = {
					ruling_party = centrism
				}
                create_country_leader = {
             name = "Leopoldo O'Donnell y Jorris"
             desc = "POLITICS_LEOPOLDO_O_DONNELL_Y_JORRIS_DESC"
             picture = "Portrait_SPR_Leopoldo_O_Donnell_y_Jorris.dds"
             expire = "1965.1.1"
             ideology = conserv_liberal
             traits = {
                      #
                   }
                }
			}
		}
	}

########### Revoking Espartero´s reforms ##########

country_event = {
	id =cataloniangry.1
	title = cataloniangry.1.t
	desc = cataloniangry.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = cataloniangry.1.a
		ai_chance = { factor = 100}
		hidden_effect = {
        add_stability = -0.2
			}
		}
	}
	
########### Armero´s successor ##########

country_event = {
	id = armerosuccession.1
	title = armerosuccession.1.t
	desc = armerosuccession.1.d

	fire_only_once = yes

    is_triggered_only =  yes

	option = {
		name = armerosuccession.1.a
		ai_chance = { factor = 30 }
		hidden_effect = {
			complete_national_focus = SPR_esparteroback
			set_politics = {
					ruling_party = social_egalitarianism 
				}
			}
		}
	option = {
		name = armerosuccession.1.b
		ai_chance = { factor = 70 }
		hidden_effect = {
			complete_national_focus = SPR_elcimbrio
		}
	}
}

########### O´Donnell´s assassination ##########

country_event = {
	id = assassinationell.1
	title = assassinationell.1.t
	desc = assassinationell.1.d

	fire_only_once = yes

    trigger = {
	   has_country_flag = SPR_killodonnell
	}

	option = {
		name = assassinationell.1.a
		ai_chance = { factor = 30 }
		hidden_effect = {
			complete_national_focus = SPR_odonnelldead
            clr_country_flag = SPR_killodonnell
			}
		}
}

########## Crown Baldomero I ###################

country_event = {
	id = assassinationell.2
	title = assassinationell.2.t
	desc = assassinationell.2.d

	fire_only_once = yes

    is_triggered_only

	option = {
		name = assassinationell.2.a
		ai_chance = { factor = 100 }
        hidden_effect = {
			    complete_national_focus = SPR_crownbaldomero
			}
		}
}

########### Something´s wrong ############

country_event = {
	id = loyalspain.1
	title = loyalspain.1.t
	desc = loyalspain.1.d

	fire_only_once = yes

    is_triggered_only

	option = {
		name = loyalspain.1.a
		ai_chance = { factor = 100 }
        hidden_effect = {
			    add_ideas = SPR_populationgrumbling
			}
		}
}

########### Definitely something´s wrong ############

country_event = {
	id = loyalspain.2
	title = loyalspain.2.t
	desc = loyalspain.2.d

	fire_only_once = yes

    is_triggered_only

	option = {
		name = loyalspain.2.a
		ai_chance = { factor = 100 }
        hidden_effect = {
			    add_political_power = -50
			}
		}
}

########### Motin de artillería ############

country_event = {
	id = loyalspain.3
	title = loyalspain.3.t
	desc = loyalspain.3.d

	fire_only_once = yes

    is_triggered_only

	option = {
		name = loyalspain.3.a
		ai_chance = { factor = 100 }
        hidden_effect = {
			    add_political_power = -50
				start_civil_war = { ideology = centrism size = 0.4 }
			}
		}
}

########## Third/Fourth Carlist War #######

country_event = {
	id = thirdcarlism.1
	title = thirdcarlism.1.t
	desc = thirdcarlism.1.d

	fire_only_once = yes

    trigger = {
		TAG = SPR
		date > 1872.16.19
	}

	option = {
		name = thirdcarlism.1.a
		ai_chance = { factor = 50 }
		if = {
		    limit = {
                SPR = { has_country_flag = Thirdcarlist }
		    }
			 SPR = { country_event = { days = 1 id = thirdcarlism.2 } }
		}
		if = {
		    limit = {
                SPR = { 
                    NOT = {
                        has_country_flag = Thirdcarlist
                    }
                }
		    }
            SPR = { country_event = { days = 1 id = thirdcarlism.3 } }
		}
	}
}

country_event = {
	id = thirdcarlism.2
	title = thirdcarlism.2.t
	desc = thirdcarlism.2.d

	fire_only_once = yes

	is_triggered_only = yes
    option = { 
	        name = thirdcarlism.2.a
			ai_chance = {
                factor = 50
            }
            CSP = {
        		transfer_state = 172
        		172 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		transfer_state = 177
        		177 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		166 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		165 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		167 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		1059 = {
            		add_core_of = CSP
        		}  
        	}
			 CSP = {
			 inherit_technology = SPR }
			 CSP = {
			  create_country_leader = {
	                name = "Carlos III"
	                picture = "Portrait_SPA_Carlos_III"
					expire = 1909.1.1
	                ideology = absolutism 
                }
			 }
			CSP = {
			   declare_war_on = { target = SPR type = annex_everything }}
			CSP = {
			   load_oob = CSP_thirdcarlist }
		}
}

country_event = {
	id = thirdcarlism.3
	title = thirdcarlism.3.t
	desc = thirdcarlism.3.d

	fire_only_once = yes

	is_triggered_only = yes
    option = { 
	        name = thirdcarlism.2.a
			ai_chance = {
                factor = 50
            }
            CSP = {
        		transfer_state = 172
        		172 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		166 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		165 = {
            		add_core_of = CSP
        		}  
        	}
			CSP = {
        		transfer_state = 177
        		177 = {
            		add_core_of = CSP
        		}  
        	}
			 CSP = {
			 inherit_technology = SPR }
			 CSP = {
			  create_country_leader = {
	                name = "Carlos III"
	                picture = "Portrait_CSP_Carlos_III.dds"
					expire = 1909.1.1
	                ideology = absolutism 
                }
			 }
			CSP = {
			   declare_war_on = { target = SPR type = annex_everything }}
			CSP = {
			   load_oob = CSP_thirdcarlist }
		}
}